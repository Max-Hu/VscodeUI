{
  "name": "vscode-pr-reviewer-stage1",
  "version": "0.1.0",
  "private": true,
  "type": "module",
  "main": "./dist/src/extension/extension.js",
  "packageManager": "npm@10.2.4",
  "engines": {
    "vscode": "^1.96.0",
    "node": "20.11.1",
    "npm": "10.2.4"
  },
  "activationEvents": [
    "onView:prReviewer.panel",
    "onCommand:prReviewer.openPanel"
  ],
  "contributes": {
    "viewsContainers": {
      "activitybar": [
        {
          "id": "prReviewer",
          "title": "PR Reviewer",
          "icon": "media/icon.svg"
        }
      ]
    },
    "views": {
      "prReviewer": [
        {
          "id": "prReviewer.panel",
          "name": "PR Reviewer",
          "type": "webview"
        }
      ]
    },
    "commands": [
      {
        "command": "prReviewer.openPanel",
        "title": "PR Reviewer: Focus Panel"
      }
    ],
    "configuration": {
      "title": "PR Reviewer",
      "properties": {
        "prReviewer.config": {
          "type": "object",
          "default": {},
          "description": "Structured PR Reviewer configuration (breaking change from legacy flat prReviewer.* keys).",
          "additionalProperties": false,
          "properties": {
            "providers": {
              "type": "object",
              "description": "Provider runtime switches and connection settings.",
              "additionalProperties": false,
              "properties": {
                "useDemoData": {
                  "type": "boolean",
                  "default": true,
                  "description": "Use built-in demo providers instead of real HTTP providers."
                },
                "disableTlsValidation": {
                  "type": "boolean",
                  "default": false,
                  "description": "Disable TLS certificate validation for real HTTP providers."
                },
                "github": {
                  "type": "object",
                  "description": "GitHub provider settings (username/password auth only).",
                  "additionalProperties": false,
                  "properties": {
                    "domain": {
                      "type": "string",
                      "default": "https://api.github.com",
                      "description": "GitHub API base URL."
                    },
                    "credential": {
                      "type": "object",
                      "additionalProperties": false,
                      "description": "GitHub credentials. Only username/password are supported.",
                      "properties": {
                        "usernameRef": {
                          "type": "string",
                          "default": "",
                          "description": "Environment variable name containing GitHub username."
                        },
                        "passwordRef": {
                          "type": "string",
                          "default": "",
                          "description": "Environment variable name containing GitHub password."
                        },
                        "username": {
                          "type": "string",
                          "default": "",
                          "description": "Direct GitHub username (prefer usernameRef)."
                        },
                        "password": {
                          "type": "string",
                          "default": "",
                          "description": "Direct GitHub password (prefer passwordRef)."
                        }
                      }
                    }
                  }
                },
                "jira": {
                  "type": "object",
                  "description": "Jira provider settings (token auth only).",
                  "additionalProperties": false,
                  "properties": {
                    "domain": {
                      "type": "string",
                      "default": "https://your-domain.atlassian.net",
                      "description": "Jira base URL."
                    },
                    "credential": {
                      "type": "object",
                      "additionalProperties": false,
                      "description": "Jira credentials. Only token/tokenRef are supported.",
                      "properties": {
                        "tokenRef": {
                          "type": "string",
                          "default": "",
                          "description": "Environment variable name containing Jira token."
                        },
                        "token": {
                          "type": "string",
                          "default": "",
                          "description": "Direct Jira token (prefer tokenRef)."
                        }
                      }
                    }
                  }
                },
                "confluence": {
                  "type": "object",
                  "description": "Confluence provider settings (token auth only).",
                  "additionalProperties": false,
                  "properties": {
                    "domain": {
                      "type": "string",
                      "default": "https://your-domain.atlassian.net/wiki",
                      "description": "Confluence base URL."
                    },
                    "credential": {
                      "type": "object",
                      "additionalProperties": false,
                      "description": "Confluence credentials. Only token/tokenRef are supported.",
                      "properties": {
                        "tokenRef": {
                          "type": "string",
                          "default": "",
                          "description": "Environment variable name containing Confluence token."
                        },
                        "token": {
                          "type": "string",
                          "default": "",
                          "description": "Direct Confluence token (prefer tokenRef)."
                        }
                      }
                    }
                  }
                }
              }
            },
            "llm": {
              "type": "object",
              "description": "LLM execution settings.",
              "additionalProperties": false,
              "properties": {
                "mode": {
                  "type": "string",
                  "enum": [
                    "copilot",
                    "mock"
                  ],
                  "default": "copilot",
                  "description": "LLM execution mode."
                },
                "useMock": {
                  "type": "boolean",
                  "description": "Quick switch. true=mock, false=copilot. Overrides llm.mode when provided."
                }
              }
            },
            "post": {
              "type": "object",
              "description": "Publish behavior settings.",
              "additionalProperties": false,
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enable publish flow."
                },
                "requireConfirmation": {
                  "type": "boolean",
                  "default": true,
                  "description": "Require confirmation before publishing."
                }
              }
            },
            "resilience": {
              "type": "object",
              "description": "Failure tolerance settings.",
              "additionalProperties": false,
              "properties": {
                "continueOnConfluenceError": {
                  "type": "boolean",
                  "default": true,
                  "description": "Continue review when Confluence retrieval fails."
                }
              }
            },
            "observability": {
              "type": "object",
              "description": "Logging and observability settings.",
              "additionalProperties": false,
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true,
                  "description": "Emit observability events."
                },
                "verboseLogs": {
                  "type": "boolean",
                  "default": false,
                  "description": "Enable verbose debug logs in Output channel."
                }
              }
            }
          }
        }
      }
    }
  },
  "description": "Stage 4 delivery: Full VS Code panel wiring for PR review pipeline",
  "icon": "media/extension-icon.png",
  "scripts": {
    "build": "tsc -p tsconfig.json",
    "test": "node --test --loader ts-node/esm"
  },
  "devDependencies": {
    "@types/node": "^22.13.4",
    "@types/vscode": "^1.96.0",
    "ts-node": "^10.9.2",
    "typescript": "^5.7.3"
  }
}
