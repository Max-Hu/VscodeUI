{
  "name": "vscode-pr-reviewer-stage1",
  "version": "0.1.0",
  "private": true,
  "type": "module",
  "main": "./dist/src/extension/extension.js",
  "packageManager": "npm@10.2.4",
  "engines": {
    "vscode": "^1.96.0",
    "node": "20.11.1",
    "npm": "10.2.4"
  },
  "activationEvents": [
    "onView:prReviewer.panel",
    "onCommand:prReviewer.openPanel"
  ],
  "contributes": {
    "viewsContainers": {
      "activitybar": [
        {
          "id": "prReviewer",
          "title": "PR Reviewer",
          "icon": "media/icon.svg"
        }
      ]
    },
    "views": {
      "prReviewer": [
        {
          "id": "prReviewer.panel",
          "name": "PR Reviewer",
          "type": "webview"
        }
      ]
    },
    "commands": [
      {
        "command": "prReviewer.openPanel",
        "title": "PR Reviewer: Focus Panel"
      }
    ],
    "configuration": {
      "title": "PR Reviewer",
      "properties": {
        "prReviewer.config": {
          "type": "object",
          "default": {},
          "description": "Structured PR Reviewer configuration (breaking change from legacy flat prReviewer.* keys).",
          "additionalProperties": false,
          "properties": {
            "providers": {
              "type": "object",
              "description": "Provider runtime switches and connection settings.",
              "additionalProperties": false,
              "properties": {
                "useDemoData": {
                  "type": "boolean",
                  "default": true,
                  "description": "Use built-in demo providers instead of real HTTP providers."
                },
                "disableTlsValidation": {
                  "type": "boolean",
                  "default": false,
                  "description": "Disable TLS certificate validation for real HTTP providers."
                },
                "github": {
                  "type": "object",
                  "description": "GitHub provider settings (token auth only, API base must end with /api/v3).",
                  "additionalProperties": false,
                  "properties": {
                    "domain": {
                      "type": "string",
                      "default": "https://alm-github.test/api/v3",
                      "description": "GitHub API base URL. Must match https://{host}/api/v3."
                    },
                    "credential": {
                      "type": "object",
                      "additionalProperties": false,
                      "description": "GitHub credentials. Only token/tokenRef are supported.",
                      "properties": {
                        "tokenRef": {
                          "type": "string",
                          "default": "",
                          "description": "GitHub token value (legacy field name; treated the same as token)."
                        },
                        "token": {
                          "type": "string",
                          "default": "",
                          "description": "Direct GitHub token (prefer tokenRef)."
                        }
                      }
                    }
                  }
                },
                "jira": {
                  "type": "object",
                  "description": "Jira provider settings (token auth only).",
                  "additionalProperties": false,
                  "properties": {
                    "domain": {
                      "type": "string",
                      "default": "https://alm-jira.test/jira",
                      "description": "Jira base URL. Must match https://{host}/jira or .../jira/rest/api/2."
                    },
                    "credential": {
                      "type": "object",
                      "additionalProperties": false,
                      "description": "Jira credentials. Only token/tokenRef are supported.",
                      "properties": {
                        "tokenRef": {
                          "type": "string",
                          "default": "",
                          "description": "Jira token value (legacy field name; treated the same as token)."
                        },
                        "token": {
                          "type": "string",
                          "default": "",
                          "description": "Direct Jira token (prefer tokenRef)."
                        }
                      }
                    }
                  }
                },
                "confluence": {
                  "type": "object",
                  "description": "Confluence provider settings (token auth only).",
                  "additionalProperties": false,
                  "properties": {
                    "enableExpandedSearch": {
                      "type": "boolean",
                      "default": false,
                      "description": "Enable query-based Confluence expanded search. When false, only direct links with resolvable page IDs are fetched."
                    },
                    "domain": {
                      "type": "string",
                      "default": "https://alm-confluence.test/confluence",
                      "description": "Confluence base URL. Must match https://{host}/confluence or .../confluence/rest/api."
                    },
                    "credential": {
                      "type": "object",
                      "additionalProperties": false,
                      "description": "Confluence credentials. Only token/tokenRef are supported.",
                      "properties": {
                        "tokenRef": {
                          "type": "string",
                          "default": "",
                          "description": "Confluence token value (legacy field name; treated the same as token)."
                        },
                        "token": {
                          "type": "string",
                          "default": "",
                          "description": "Direct Confluence token (prefer tokenRef)."
                        }
                      }
                    }
                  }
                }
              }
            },
            "llm": {
              "type": "object",
              "description": "LLM execution settings.",
              "additionalProperties": false,
              "properties": {
                "mode": {
                  "type": "string",
                  "enum": [
                    "copilot",
                    "mock"
                  ],
                  "default": "copilot",
                  "description": "LLM execution mode."
                }
              }
            },
            "post": {
              "type": "object",
              "description": "Publish behavior settings.",
              "additionalProperties": false,
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enable publish flow."
                },
                "requireConfirmation": {
                  "type": "boolean",
                  "default": true,
                  "description": "Require confirmation before publishing."
                }
              }
            },
            "resilience": {
              "type": "object",
              "description": "Failure tolerance settings.",
              "additionalProperties": false,
              "properties": {
                "continueOnConfluenceError": {
                  "type": "boolean",
                  "default": true,
                  "description": "Continue review when Confluence retrieval fails."
                }
              }
            },
            "observability": {
              "type": "object",
              "description": "Logging and observability settings.",
              "additionalProperties": false,
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true,
                  "description": "Emit observability events."
                },
                "verboseLogs": {
                  "type": "boolean",
                  "default": false,
                  "description": "Enable verbose debug logs in Output channel."
                }
              }
            }
          }
        }
      }
    }
  },
  "description": "Stage 4 delivery: Full VS Code panel wiring for PR review pipeline",
  "icon": "media/extension-icon.png",
  "scripts": {
    "build": "tsc -p tsconfig.json",
    "test": "node --test --loader ts-node/esm"
  },
  "devDependencies": {
    "@types/node": "^22.13.4",
    "@types/vscode": "^1.96.0",
    "ts-node": "^10.9.2",
    "typescript": "^5.7.3"
  }
}
